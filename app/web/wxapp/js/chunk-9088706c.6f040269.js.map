{"version":3,"sources":["webpack:///./src/views/WxAuth.vue?5b58","webpack:///./src/views/WxAuth.vue?04f2","webpack:///src/views/WxAuth.vue","webpack:///./src/views/WxAuth.vue?e897","webpack:///./src/views/WxAuth.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WxAuth_vue_vue_type_style_index_0_id_5c908d2f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_WxAuth_vue_vue_type_style_index_0_id_5c908d2f_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","_v","WxAuthvue_type_script_lang_js_","name","created","_created","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","res","redirectUrl","wrap","_context","prev","next","localStorage","clear","$route","query","code","apis","public","getWxUserInfo","platform","sent","setItem","data","userInfo","openid","$store","commit","token","auth","JSON","stringify","sessionStorage","getItem","$router","replace","stop","apply","arguments","views_WxAuthvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"yIAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAkeE,EAAG,4CCAre,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BH,EAAAI,MAAAC,GAAwB,OAAAL,EAAAM,GAAA,IACzFC,EAAA,YAAoC,IAAAP,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BE,EAAAL,EAAAI,MAAAC,IAAAH,EAAwB,OAAAG,EAAA,OAAAA,EAAA,OAA2BG,YAAA,YAAuB,CAAAR,EAAAS,GAAA,kECUrJC,EAAA,CACAC,KAAA,SACAC,QAFA,eAAAC,EAAAC,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAJ,mBAAAK,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAGAC,aAAAC,SAGAzB,KAAA0B,OAAAC,MAAAC,KANA,CAAAP,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,EAOAvB,KAAA6B,KAAAC,OAAAC,cAAA,CACAH,KAAA5B,KAAA0B,OAAAC,MAAAC,KACAI,SAAA,IATA,OAOAd,EAPAG,EAAAY,KAWAf,GAAA,MAAAA,EAAAU,OACAJ,aAAAU,QAAA,SAAAhB,EAAAiB,KAAAC,SAAAC,QACArC,KAAAsC,OAAAC,OAAA,eAAArB,EAAAiB,KAAAC,UACApC,KAAAsC,OAAAC,OAAA,YAAArB,EAAAiB,KAAAK,OACA3B,OAAA4B,EAAA,KAAA5B,CAAAK,EAAAiB,KAAAK,OACAhB,aAAAU,QAAA,aAAAQ,KAAAC,UAAAzB,EAAAiB,KAAAC,WACAQ,eAAAV,QAAA,aAAAhB,EAAAiB,KAAAC,SAAAC,SAEAlB,EAAAyB,eAAAC,QAAA,iBACA7C,KAAA8C,QAAAC,QAAA5B,GApBAE,EAAAE,KAAA,iBA+BAvB,KAAA8C,QAAAC,QAAA,KA/BA,yBAAA1B,EAAA2B,SAAA/B,EAAAjB,SAAA,SAAAW,IAAA,OAAAC,EAAAqC,MAAAjD,KAAAkD,WAAA,OAAAvC,EAAA,ICXgVwC,EAAA,0BCQhVC,EAAgBvC,OAAAwC,EAAA,KAAAxC,CACdsC,EACArD,EACAQ,GACF,EACA,KACA,WACA,MAIegD,EAAA,WAAAF","file":"js/chunk-9088706c.6f040269.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WxAuth.vue?vue&type=style&index=0&id=5c908d2f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WxAuth.vue?vue&type=style&index=0&id=5c908d2f&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"own-auth\"},[_vm._v(\"请稍后，登录中...\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n      <div class=\"own-auth\">请稍后，登录中...</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  /**\r\n   * 微信网页授权\r\n   */\r\n  import { setToken } from '../utils/auth'\r\n  export default {\r\n    name: 'wxAuth',\r\n    async created(){\r\n      localStorage.clear();\r\n      // 如果连接中有微信返回的 code，则用此 code 调用后端接口，向微信服务器请求用户信息\r\n      // 如果不是从微信重定向过来的，没有带着微信的 code，则直接进入首页\r\n       if (this.$route.query.code) {\r\n        let res = await this.apis.public.getWxUserInfo({\r\n          code: this.$route.query.code,\r\n          platform: 1\r\n        });\r\n        if (res && res.code === 200) {\r\n          localStorage.setItem('openid', res.data.userInfo.openid);\r\n          this.$store.commit('SET_USERINFO', res.data.userInfo);\r\n          this.$store.commit('SET_TOKEN', res.data.token);\r\n          setToken(res.data.token); // 保存token\r\n          localStorage.setItem('wxUserInfo', JSON.stringify(res.data.userInfo));\r\n          sessionStorage.setItem('wxUserInfo', res.data.userInfo.openid); // 离开页面后在进入需要授权登录\r\n        }\r\n        let redirectUrl = sessionStorage.getItem('wxRedirectUrl');\r\n        this.$router.replace(redirectUrl)\r\n\r\n       /* this.$store.dispatch('loginByCode', { code: this.$route.query.code})\r\n          .then((res) => {\r\n            let redirectUrl = sessionStorage.getItem('wxRedirectUrl');\r\n            this.$router.replace(redirectUrl)\r\n          })\r\n          .catch(() => {\r\n            this.loading = false\r\n          })*/\r\n      } else {\r\n        this.$router.replace('/')\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style scoped>\r\n  .own-auth{\r\n    text-align: center;\r\n    padding: 20px 0;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WxAuth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WxAuth.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WxAuth.vue?vue&type=template&id=5c908d2f&scoped=true&\"\nimport script from \"./WxAuth.vue?vue&type=script&lang=js&\"\nexport * from \"./WxAuth.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WxAuth.vue?vue&type=style&index=0&id=5c908d2f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c908d2f\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}